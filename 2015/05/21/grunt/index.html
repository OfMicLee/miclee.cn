<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

<title>［工具篇］Grunt</title>
<meta name="author" content="MicLee">

<meta name="keywords" content="undefined">

<meta name="description " content="Grunt是一个自动任务运行器，会按照预先设定的顺序自动运行一系列的任务，简化工作流程，减轻重复性工作带来的负担">

<link rel="icon" href="/favicon.png">

<link rel="stylesheet" href="/css/style.css" type="text/css">
  </head>
  <body>
    <aside id="sidebar">
  <nav id="tags">
    <a href="http://miclee.cn" id="avatar" style="background-image:url(/favicon.png)"></a>
    <ul id="tags__ul">
      <li id="pl__all" class="tags__li tags-btn active">所有文章</li>
      
      <li id="java" class="tags__li tags-btn">java</li>
      
      <li id="spring" class="tags__li tags-btn">spring</li>
      
      <li id="Java" class="tags__li tags-btn">Java</li>
      
      <li id="blog" class="tags__li tags-btn">blog</li>
      
      <li id="nodejs" class="tags__li tags-btn">nodejs</li>
      
      <li id="移动端" class="tags__li tags-btn">移动端</li>
      
      <li id="技术综合" class="tags__li tags-btn">技术综合</li>
      
    </ul>
    <div id="tags__bottom">
      <a href="http://github.com/ofmiclee" rel="nofollow" id="icon-github" target="_blank" class="tags-btn fontello"></a>
      <!-- <a href="https://github.com/OfMicLee/img-hosting/blob/master/qq.png" rel="nofollow" id="icon-qq" target="_blank" class="tags-btn fontello"></a> -->
    </div>
  </nav> <!-- end #tags -->
  <div id="posts-list">
    <form action="http://www.baidu.com/s?wd=site:miclee.cn" id="search-form" target="_blank">
      <a href="/" id="mobile-avatar" style="background-image:url(/favicon.png)"></a>
      <input id="search-input" type="text" placeholder="Search..." />
    </form>
        <nav id="pl__container">
          
                
                    <a class="java pl__all" href="/2015/12/18/template-language/" title="常用模板语言">
                      
                      <span class="pl__circle"></span><span class="pl__title">常用模板语言</span><span class="pl__date">2015-12-18</span>
                    </a>
                
          
                
                    <a class="spring pl__all" href="/2015/12/18/spring-boot-web-application/" title="使用spring-boot开发WEB应用">
                      
                      <span class="pl__circle"></span><span class="pl__title">使用spring-boot开发WEB应用</span><span class="pl__date">2015-12-18</span>
                    </a>
                
                    <a class="spring pl__all" href="/2015/12/17/spring-boot-hello/" title="Sring Boot 动手">
                      
                      <span class="pl__circle"></span><span class="pl__title">Sring Boot 动手</span><span class="pl__date">2015-12-17</span>
                    </a>
                
                    <a class="spring pl__all" href="/2015/12/14/spring-security/" title="使用 Spring Security 保护 Web 应用的安全">
                      
                      <span class="pl__circle"></span><span class="pl__title">使用 Spring Security 保...</span><span class="pl__date">2015-12-14</span>
                    </a>
                
                    <a class="spring pl__all" href="/2015/11/28/spring-boot-admin/" title="spring-boot-admin 使用介绍">
                      
                      <span class="pl__circle"></span><span class="pl__title">spring-boot-admin 使用...</span><span class="pl__date">2015-11-28</span>
                    </a>
                
                    <a class="spring pl__all" href="/2015/08/10/spring-boot/" title="spring-boot介绍">
                      
                      <span class="pl__circle"></span><span class="pl__title">spring-boot介绍</span><span class="pl__date">2015-08-10</span>
                    </a>
                
          
                
                    <a class="Java pl__all" href="/2015/12/17/slf4j/" title="为什么要使用SLF4J而不是Log4J">
                      
                      <span class="pl__circle"></span><span class="pl__title">为什么要使用SLF4J而不是Log4J</span><span class="pl__date">2015-12-17</span>
                    </a>
                
                    <a class="Java pl__all" href="/2015/12/16/maven-plugin/" title="常用Maven插件介绍">
                      
                      <span class="pl__circle"></span><span class="pl__title">常用Maven插件介绍</span><span class="pl__date">2015-12-16</span>
                    </a>
                
                    <a class="Java pl__all" href="/2015/08/27/java-design-pattern-3/" title="JAVA的23种设计模式(三)">
                      
                      <span class="pl__circle"></span><span class="pl__title">JAVA的23种设计模式(三)</span><span class="pl__date">2015-08-27</span>
                    </a>
                
                    <a class="Java pl__all" href="/2015/08/27/java-design-pattern-2/" title="JAVA的23种设计模式(二)">
                      
                      <span class="pl__circle"></span><span class="pl__title">JAVA的23种设计模式(二)</span><span class="pl__date">2015-08-27</span>
                    </a>
                
                    <a class="Java pl__all" href="/2015/08/27/jvm/" title="jvm">
                      
                      <span class="pl__circle"></span><span class="pl__title">jvm</span><span class="pl__date">2015-08-27</span>
                    </a>
                
                    <a class="Java pl__all" href="/2015/08/27/java-design-pattern-1/" title="JAVA的23种设计模式(一)">
                      
                      <span class="pl__circle"></span><span class="pl__title">JAVA的23种设计模式(一)</span><span class="pl__date">2015-08-27</span>
                    </a>
                
                    <a class="Java pl__all" href="/2015/08/06/java/" title="JAVA世界里的一些概念">
                      
                      <span class="pl__circle"></span><span class="pl__title">JAVA世界里的一些概念</span><span class="pl__date">2015-08-06</span>
                    </a>
                
          
                
                    <a class="blog pl__all" href="/2015/11/25/free-programming-books/" title="免费编程书籍">
                      
                      <span class="pl__circle"></span><span class="pl__title">免费编程书籍</span><span class="pl__date">2015-11-25</span>
                    </a>
                
                    <a class="blog pl__all" href="/2015/08/08/resource/" title="资源记录">
                      
                      <span class="pl__circle"></span><span class="pl__title">资源记录</span><span class="pl__date">2015-08-08</span>
                    </a>
                
                    <a class="blog pl__all" href="/2015/07/02/atom-keyboard-shortcuts/" title="atom 快捷键">
                      
                      <span class="pl__circle"></span><span class="pl__title">atom 快捷键</span><span class="pl__date">2015-07-02</span>
                    </a>
                
                    <a class="blog pl__all" href="/2015/05/19/markdown-syntax/" title="Markdown Syntax">
                      
                      <span class="pl__circle"></span><span class="pl__title">Markdown Syntax</span><span class="pl__date">2015-05-19</span>
                    </a>
                
          
                
                    <a class="nodejs pl__all" href="/2015/08/22/wechat-platform/" title="微信第三方平台授权权限集">
                      
                      <span class="pl__circle"></span><span class="pl__title">微信第三方平台授权权限集</span><span class="pl__date">2015-08-22</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/08/22/qm-wechat/" title="千米微信第三方平台应用">
                      
                      <span class="pl__circle"></span><span class="pl__title">千米微信第三方平台应用</span><span class="pl__date">2015-08-22</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/07/23/node-profiler/" title="Node Profiler">
                      
                      <span class="pl__circle"></span><span class="pl__title">Node Profiler</span><span class="pl__date">2015-07-23</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/07/03/koa/" title="koa框架">
                      
                      <span class="pl__circle"></span><span class="pl__title">koa框架</span><span class="pl__date">2015-07-03</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/07/03/express/" title="express框架">
                      
                      <span class="pl__circle"></span><span class="pl__title">express框架</span><span class="pl__date">2015-07-03</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/06/03/shen-ru-qian-chu-nodejs-reading-note/" title="深入浅出Nodejs读书笔记">
                      
                      <span class="pl__circle"></span><span class="pl__title">深入浅出Nodejs读书笔记</span><span class="pl__date">2015-06-03</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/21/gulp/" title="［工具篇］Gulp：任务自动管理">
                      
                      <span class="pl__circle"></span><span class="pl__title">［工具篇］Gulp：任务自动管理</span><span class="pl__date">2015-05-21</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/21/grunt/" title="［工具篇］Grunt">
                      
                      <span class="pl__circle"></span><span class="pl__title">［工具篇］Grunt</span><span class="pl__date">2015-05-21</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/21/bower/" title="［工具篇］Bower">
                      
                      <span class="pl__circle"></span><span class="pl__title">［工具篇］Bower</span><span class="pl__date">2015-05-21</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/20/process/" title="process 对象">
                      
                      <span class="pl__circle"></span><span class="pl__title">process 对象</span><span class="pl__date">2015-05-20</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/20/packagejson/" title="package.json 文件">
                      
                      <span class="pl__circle"></span><span class="pl__title">package.json 文件</span><span class="pl__date">2015-05-20</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/20/npm/" title="npm模块管理器">
                      
                      <span class="pl__circle"></span><span class="pl__title">npm模块管理器</span><span class="pl__date">2015-05-20</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/20/fs/" title="fs 模块">
                      
                      <span class="pl__circle"></span><span class="pl__title">fs 模块</span><span class="pl__date">2015-05-20</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/19/nodejs-basic/" title="Node.js 概述">
                      
                      <span class="pl__circle"></span><span class="pl__title">Node.js 概述</span><span class="pl__date">2015-05-19</span>
                    </a>
                
                    <a class="nodejs pl__all" href="/2015/05/18/commonjs/" title="CommonJS规范">
                      
                      <span class="pl__circle"></span><span class="pl__title">CommonJS规范</span><span class="pl__date">2015-05-18</span>
                    </a>
                
          
                
                    <a class="移动端 pl__all" href="/2015/08/20/ios-app-depolyment/" title="ios app 发布模式">
                      
                      <span class="pl__circle"></span><span class="pl__title">ios app 发布模式</span><span class="pl__date">2015-08-20</span>
                    </a>
                
                    <a class="移动端 pl__all" href="/2015/08/19/ios-app-publish/" title="ios app 发布流程">
                      
                      <span class="pl__circle"></span><span class="pl__title">ios app 发布流程</span><span class="pl__date">2015-08-19</span>
                    </a>
                
                    <a class="移动端 pl__all" href="/2015/08/06/ionic&&phonegap/" title="ionic">
                      
                      <span class="pl__circle"></span><span class="pl__title">ionic</span><span class="pl__date">2015-08-06</span>
                    </a>
                
          
                
                    <a class="技术综合 pl__all" href="/2015/08/19/makefile&shell/" title="makefile和shell脚本的区别">
                      
                      <span class="pl__circle"></span><span class="pl__title">makefile和shell脚本的区别</span><span class="pl__date">2015-08-19</span>
                    </a>
                
                    <a class="技术综合 pl__all" href="/2015/07/30/git/" title="git操作技巧">
                      
                      <span class="pl__circle"></span><span class="pl__title">git操作技巧</span><span class="pl__date">2015-07-30</span>
                    </a>
                
                    <a class="技术综合 pl__all" href="/2015/06/23/frontend-knowledge-structure/" title="Frontend Knowledge Structure">
                      
                      <span class="pl__circle"></span><span class="pl__title">Frontend Knowledge S...</span><span class="pl__date">2015-06-23</span>
                    </a>
                
                    <a class="技术综合 pl__all" href="/2015/05/29/http-status-code/" title="HTTP Status Code">
                      
                      <span class="pl__circle"></span><span class="pl__title">HTTP Status Code</span><span class="pl__date">2015-05-29</span>
                    </a>
                
          
        </nav>
  </div> <!-- end #posts-list -->
</aside> <!-- end #sidebar -->

    <div id="post">
      <div id="pjax">
        <article id="post__content">
  <h1 id="post__title" data-identifier="2015-05-21">［工具篇］Grunt</h1>
  <p><strong><em> Grunt是一个自动任务运行器，会按照预先设定的顺序自动运行一系列的任务，简化工作流程，减轻重复性工作带来的负担 </em></strong><br><a id="more"></a></p>
<hr>
<p>在Javascript的开发过程中，经常会遇到一些重复性的任务，比如合并文件、压缩代码、检查语法错误、将Sass代码转成CSS代码等等。通常，我们需要使用不同的工具，来完成不同的任务，既重复劳动又非常耗时。Grunt就是为了解决这个问题而发明的工具，可以帮助我们自动管理和运行各种任务。</p>
<p>简单说，Grunt是一个自动任务运行器，会按照预先设定的顺序自动运行一系列的任务。这可以简化工作流程，减轻重复性工作带来的负担。</p>
<h2 id="安装">安装</h2><p>Grunt基于Node.js，安装之前要先安装Node.js，然后运行下面的命令。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo npm install grunt-cli -g</span><br></pre></td></tr></table></figure>
<p>grunt-cli表示安装的是grunt的命令行界面，参数g表示全局安装。</p>
<p>Grunt使用模块结构，除了安装命令行界面以外，还要根据需要安装相应的模块。这些模块应该采用局部安装，因为不同项目可能需要同一个模块的不同版本。</p>
<p>首先，在项目的根目录下，创建一个文本文件package.json，指定当前项目所需的模块。下面就是一个例子。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"my-project-name"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">"Your Name"</span>,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"grunt"</span>: <span class="string">"0.x.x"</span>,</span><br><span class="line">    <span class="string">"grunt-contrib-jshint"</span>: <span class="string">"*"</span>,</span><br><span class="line">    <span class="string">"grunt-contrib-concat"</span>: <span class="string">"~0.1.1"</span>,</span><br><span class="line">    <span class="string">"grunt-contrib-uglify"</span>: <span class="string">"~0.1.0"</span>,</span><br><span class="line">    <span class="string">"grunt-contrib-watch"</span>: <span class="string">"~0.1.4"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面这个package.json文件中，除了注明项目的名称和版本以外，还在devDependencies属性中指定了项目依赖的grunt模块和版本：grunt核心模块为最新的0.x.x版，jshint插件为最新版本，concat插件不低于0.1.1版，uglify插件不低于0.1.0版，watch插件不低于0.1.4版。</p>
<p>然后，在项目的根目录下运行下面的命令，这些插件就会被自动安装在node_modules子目录。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>上面这种方法是针对已有package.json的情况。如果想要自动生成package.json文件，可以使用npm init命令，按照屏幕提示回答所需模块的名称和版本即可。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>如果已有的package.json文件不包括Grunt模块，可以在直接安装Grunt模块的时候，加上–save-dev参数，该模块就会自动被加入package.json文件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install &lt;module&gt; --save-dev</span><br></pre></td></tr></table></figure>
<p>比如，对应上面package.json文件指定的模块，需要运行以下npm命令。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install grunt --save-dev</span><br><span class="line">npm install grunt-contrib-jshint --save-dev</span><br><span class="line">npm install grunt-contrib-concat --save-dev</span><br><span class="line">npm install grunt-contrib-uglify --save-dev</span><br><span class="line">npm install grunt-contrib-watch --save-dev</span><br></pre></td></tr></table></figure>
<h2 id="命令脚本文件Gruntfile-js">命令脚本文件Gruntfile.js</h2><p>模块安装完以后，下一步在项目的根目录下，新建脚本文件Gruntfile.js。它是grunt的配置文件，就好像package.json是npm的配置文件一样。Gruntfile.js就是一般的Node.js模块的写法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">grunt</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 配置Grunt各种模块的参数</span></span><br><span class="line">  grunt.initConfig(&#123;</span><br><span class="line">    jshint: &#123; <span class="comment">/* jshint的参数 */</span> &#125;,</span><br><span class="line">    concat: &#123; <span class="comment">/* concat的参数 */</span> &#125;,</span><br><span class="line">    uglify: &#123; <span class="comment">/* uglify的参数 */</span> &#125;,</span><br><span class="line">    watch:  &#123; <span class="comment">/* watch的参数 */</span> &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 从node_modules目录加载模块文件</span></span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-jshint'</span>);</span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-concat'</span>);</span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-uglify'</span>);</span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-watch'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 每行registerTask定义一个任务</span></span><br><span class="line">  grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'jshint'</span>, <span class="string">'concat'</span>, <span class="string">'uglify'</span>]);</span><br><span class="line">  grunt.registerTask(<span class="string">'check'</span>, [<span class="string">'jshint'</span>]);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>上面的代码用到了grunt代码的三个方法：</p>
<ul>
<li><p><strong>grunt.initConfig</strong>：定义各种模块的参数，每一个成员项对应一个同名模块。</p>
</li>
<li><p><strong>grunt.loadNpmTasks</strong>：加载完成任务所需的模块。</p>
</li>
<li><p><strong>grunt.registerTask</strong>：定义具体的任务。第一个参数为任务名，第二个参数是一个数组，表示该任务需要依次使用的模块。default任务名表示，如果直接输入grunt命令，后面不跟任何参数，这时所调用的模块（该例为jshint，concat和uglify）；该例的check任务则表示使用jshint插件对代码进行语法检查。</p>
</li>
</ul>
<p>上面的代码一共加载了四个模块：jshint（检查语法错误）、concat（合并文件）、uglify（压缩代码）和watch（自动执行）。接下来，有两种使用方法。</p>
<p>（1）命令行执行某个模块，比如</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">grunt jshint</span><br></pre></td></tr></table></figure>
<p>上面代码表示运行jshint模块。</p>
<p>（2）命令行执行某个任务。比如</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">grunt check</span><br></pre></td></tr></table></figure>
<p>上面代码表示运行check任务。如果运行成功，就会显示“Done, without errors.”。</p>
<p>如果没有给出任务名，只键入grunt，就表示执行默认的default任务。</p>
<h2 id="Gruntfile-js实例：grunt-contrib-cssmin模块">Gruntfile.js实例：grunt-contrib-cssmin模块</h2><p>下面通过cssmin模块，演示如何编写Gruntfile.js文件。cssmin模块的作用是最小化CSS文件。</p>
<p>首先，在项目的根目录下安装该模块。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install grunt-contrib-cssmin --save-dev</span><br></pre></td></tr></table></figure>
<p>然后，新建文件Gruntfile.js。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">grunt</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  grunt.initConfig(&#123;</span><br><span class="line">    cssmin: &#123;</span><br><span class="line">      minify: &#123;</span><br><span class="line">        expand: <span class="literal">true</span>,</span><br><span class="line">		cwd: <span class="string">'css/'</span>,</span><br><span class="line">		src: [<span class="string">'*.css'</span>, <span class="string">'!*.min.css'</span>],</span><br><span class="line">		dest: <span class="string">'css/'</span>,</span><br><span class="line">		ext: <span class="string">'.min.css'</span></span><br><span class="line">	  &#125;,</span><br><span class="line">      combine: &#123;</span><br><span class="line">	    files: &#123;</span><br><span class="line">		  <span class="string">'css/out.min.css'</span>: [<span class="string">'css/part1.min.css'</span>, <span class="string">'css/part2.min.css'</span>]</span><br><span class="line">		&#125;</span><br><span class="line">	  &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-cssmin'</span>);</span><br><span class="line"></span><br><span class="line">  grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'cssmin:minify'</span>,<span class="string">'cssmin:combine'</span>]);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>下面详细解释上面代码中的三个方法，下面一个个来看。</p>
<p><strong>（1）grunt.loadNpmTasks</strong></p>
<p>grunt.loadNpmTasks方法载入模块文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">grunt.loadNpmTasks(<span class="string">'grunt-contrib-cssmin'</span>);</span><br></pre></td></tr></table></figure>
<p>你需要使用几个模块，这里就要写几条grunt.loadNpmTasks语句，将各个模块一一加载。</p>
<p>如果加载模块很多，这部分会非常冗长。而且，还存在一个问题，就是凡是在这里加载的模块，也同时出现在package.json文件中。如果使用npm命令卸载模块以后，模块会自动从package.json文件中消失，但是必须手动从Gruntfile.js文件中清除，这样很不方便，一旦忘记，还会出现运行错误。这里有一个解决办法，就是安装load-grunt-tasks模块，然后在Gruntfile.js文件中，用下面的语句替代所有的grunt.loadNpmTasks语句。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'load-grunt-tasks'</span>)(grunt);</span><br></pre></td></tr></table></figure>
<p>这条语句的作用是自动分析package.json文件，自动加载所找到的grunt模块。</p>
<p><strong>（2）grunt.initConfig</strong></p>
<p>grunt.initConfig方法用于模块配置，它接受一个对象作为参数。该对象的成员与使用的同名模块一一对应。由于我们要配置的是cssmin模块，所以里面有一个cssmin成员（属性）。</p>
<p>cssmin（属性）指向一个对象，该对象又包含多个成员。除了一些系统设定的成员（比如options），其他自定义的成员称为目标（target）。一个模块可以有多个目标（target），上面代码里面，cssmin模块共有两个目标，一个是“minify”，用于压缩css文件；另一个是“combine”，用于将多个css文件合并一个文件。</p>
<p>每个目标的具体设置，需要参考该模板的文档。就cssmin来讲，minify目标的参数具体含义如下：</p>
<ul>
<li><p><strong>expand</strong>：如果设为true，就表示下面文件名的占位符（即*号）都要扩展成具体的文件名。</p>
</li>
<li><p><strong>cwd</strong>：需要处理的文件（input）所在的目录。</p>
</li>
<li><p><strong>src</strong>：表示需要处理的文件。如果采用数组形式，数组的每一项就是一个文件名，可以使用通配符。</p>
</li>
<li><p><strong>dest</strong>：表示处理后的文件名或所在目录。</p>
</li>
<li><p><strong>ext</strong>：表示处理后的文件后缀名。</p>
</li>
</ul>
<p>除了上面这些参数，还有一些参数也是grunt所有模块通用的。</p>
<ul>
<li><p><strong>filter</strong>：一个返回布尔值的函数，用于过滤文件名。只有返回值为true的文件，才会被grunt处理。</p>
</li>
<li><p><strong>dot</strong>：是否匹配以点号（.）开头的系统文件。</p>
</li>
<li><p><strong>makeBase</strong>：如果设置为true，就只匹配文件路径的最后一部分。比如，a?b可以匹配/xyz/123/acb，而不匹配/xyz/acb/123。</p>
</li>
</ul>
<p>关于通配符，含义如下：</p>
<ul>
<li>*：匹配任意数量的字符，不包括/。</li>
<li>?：匹配单个字符，不包括/。</li>
<li>**：匹配任意数量的字符，包括/。</li>
<li>{}：允许使用逗号分隔的列表，表示“or”（或）关系。</li>
<li>!：用于模式的开头，表示只返回不匹配的情况。</li>
</ul>
<p>比如，foo/*.js匹配foo目录下面的文件名以.js结尾的文件，foo/**/*.js匹配foo目录和它的所有子目录下面的文件名以.js结尾的文件，!*.css表示匹配所有后缀名不为“.css”的文件。</p>
<p>使用通配符设置src属性的更多例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;src: <span class="string">'foo/th*.js'</span>&#125;grunt-contrib-uglify</span><br><span class="line"></span><br><span class="line">&#123;src: <span class="string">'foo/&#123;a,b&#125;*.js'</span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;src: [<span class="string">'foo/a*.js'</span>, <span class="string">'foo/b*.js'</span>]&#125;</span><br></pre></td></tr></table></figure>
<p>至于combine目标，就只有一个files参数，表示输出文件是css子目录下的out.min.css，输入文件则是css子目录下的part1.min.css和part2.min.css。</p>
<p>files参数的格式可以是一个对象，也可以是一个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">files: &#123;</span><br><span class="line">        <span class="string">'dest/b.js'</span>: [<span class="string">'src/bb.js'</span>, <span class="string">'src/bbb.js'</span>],</span><br><span class="line">        <span class="string">'dest/b1.js'</span>: [<span class="string">'src/bb1.js'</span>, <span class="string">'src/bbb1.js'</span>],</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"></span><br><span class="line">files: [</span><br><span class="line">        &#123;src: [<span class="string">'src/aa.js'</span>, <span class="string">'src/aaa.js'</span>], dest: <span class="string">'dest/a.js'</span>&#125;,</span><br><span class="line">        &#123;src: [<span class="string">'src/aa1.js'</span>, <span class="string">'src/aaa1.js'</span>], dest: <span class="string">'dest/a1.js'</span>&#125;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<p>如果minify目标和combine目标的属性设置有重合的部分，可以另行定义一个与minify和combine平行的options属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">grunt.initConfig(&#123;</span><br><span class="line">   cssmin: &#123;</span><br><span class="line">  options: &#123; <span class="comment">/* ... */</span> &#125;,</span><br><span class="line">     minify: &#123; <span class="comment">/* ... */</span> &#125;,</span><br><span class="line">     combine: &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>
<p><strong>（3）grunt.registerTask</strong></p>
<p>grunt.registerTask方法定义如何调用具体的任务。“default”任务表示如果不提供参数，直接输入grunt命令，则先运行“cssmin:minify”，后运行“cssmin:combine”，即先压缩再合并。如果只执行压缩，或者只执行合并，则需要在grunt命令后面指明“模块名:目标名”。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">grunt <span class="comment"># 默认情况下，先压缩后合并</span></span><br><span class="line"></span><br><span class="line">grunt cssmin:minify <span class="comment"># 只压缩不合并</span></span><br><span class="line"></span><br><span class="line">grunt css:combine <span class="comment"># 只合并不压缩</span></span><br></pre></td></tr></table></figure>
<p>如果不指明目标，只是指明模块，就表示将所有目标依次运行一遍。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">grunt cssmin</span><br></pre></td></tr></table></figure>
<h2 id="常用模块设置">常用模块设置</h2><p>grunt的<a href="http://gruntjs.com/plugins" target="_blank" rel="external">模块</a>已经超过了2000个，且还在快速增加。下面是一些常用的模块（按字母排序）。</p>
<ul>
<li><strong>grunt-contrib-clean</strong>：删除文件。</li>
<li><strong>grunt-contrib-compass</strong>：使用compass编译sass文件。</li>
<li><strong>grunt-contrib-concat</strong>：合并文件。</li>
<li><strong>grunt-contrib-copy</strong>：复制文件。</li>
<li><strong>grunt-contrib-cssmin</strong>：压缩以及合并CSS文件。</li>
<li><strong>grunt-contrib-imagemin</strong>：图像压缩模块。</li>
<li><strong>grunt-contrib-jshint</strong>：检查JavaScript语法。</li>
<li><strong>grunt-contrib-uglify</strong>：压缩以及合并JavaScript文件。</li>
<li><strong>grunt-contrib-watch</strong>：监视文件变动，做出相应动作。</li>
</ul>
<p>模块的前缀如果是grunt-contrib，就表示该模块由grunt开发团队维护；如果前缀是grunt（比如grunt-pakmanager），就表示由第三方开发者维护。</p>
<p>以下选几个模块，看看它们配置参数的写法，也就是说如何在grunt.initConfig方法中配置各个模块。</p>
<h3 id="grunt-contrib-jshint">grunt-contrib-jshint</h3><p>jshint用来检查语法错误，比如分号的使用是否正确、有没有忘记写括号等等。它在grunt.initConfig方法里面的配置代码如下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jshint: &#123;</span><br><span class="line">	options: &#123;</span><br><span class="line">		eqeqeq: <span class="literal">true</span>,</span><br><span class="line">		trailing: <span class="literal">true</span></span><br><span class="line">	&#125;,</span><br><span class="line">	files: [<span class="string">'Gruntfile.js'</span>, <span class="string">'lib/**/*.js'</span>]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>上面代码先指定jshint的<a href="http://www.jshint.com/docs/options/" target="_blank" rel="external">检查项目</a>，eqeqeq表示要用严格相等运算符取代相等运算符，trailing表示行尾不得有多余的空格。然后，指定files属性，表示检查目标是Gruntfile.js文件，以及lib目录的所有子目录下面的JavaScript文件。</p>
<h3 id="grunt-contrib-concat">grunt-contrib-concat</h3><p>concat用来合并同类文件，它不仅可以合并JavaScript文件，还可以合并CSS文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">concat: &#123;</span><br><span class="line">  js: &#123;</span><br><span class="line">    src: [<span class="string">'lib/module1.js'</span>, <span class="string">'lib/module2.js'</span>, <span class="string">'lib/plugin.js'</span>],</span><br><span class="line">    dest: <span class="string">'dist/script.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">  css: &#123;</span><br><span class="line">    src: [<span class="string">'style/normalize.css'</span>, <span class="string">'style/base.css'</span>, <span class="string">'style/theme.css'</span>],</span><br><span class="line">    dest: <span class="string">'dist/screen.css'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>js目标用于合并JavaScript文件，css目标用语合并CSS文件。两者的src属性指定需要合并的文件（input），dest属性指定输出的目标文件（output）。</p>
<h3 id="grunt-contrib-uglify">grunt-contrib-uglify</h3><p>uglify模块用来压缩代码，减小文件体积。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">uglify: &#123;</span><br><span class="line">  options: &#123;</span><br><span class="line">    banner: bannerContent,</span><br><span class="line">    sourceMapRoot: <span class="string">'../'</span>,</span><br><span class="line">    sourceMap: <span class="string">'distrib/'</span>+name+<span class="string">'.min.js.map'</span>,</span><br><span class="line">    sourceMapUrl: name+<span class="string">'.min.js.map'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  target : &#123;</span><br><span class="line">	expand: <span class="literal">true</span>,</span><br><span class="line">	cwd: <span class="string">'js/origin'</span>,</span><br><span class="line">	src : <span class="string">'*.js'</span>,</span><br><span class="line">	dest : <span class="string">'js/'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>上面代码中的options属性指定压缩后文件的文件头，以及sourceMap设置；target目标指定输入和输出文件。</p>
<h3 id="grunt-contrib-copy">grunt-contrib-copy</h3><p><a href="https://github.com/gruntjs/grunt-contrib-copy" target="_blank" rel="external">copy模块</a>用于复制文件与目录。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">copy: &#123;</span><br><span class="line">  main: &#123;</span><br><span class="line">    src: <span class="string">'src/*'</span>,</span><br><span class="line">    dest: <span class="string">'dest/'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>上面代码将src子目录（只包含它下面的第一层文件和子目录），拷贝到dest子目录下面（即dest/src目录）。如果要更准确控制拷贝行为，比如只拷贝文件、不拷贝目录、不保持目录结构，可以写成下面这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">copy: &#123;</span><br><span class="line">  main: &#123;</span><br><span class="line">    expand: <span class="literal">true</span>,</span><br><span class="line">    cwd: <span class="string">'src/'</span>,</span><br><span class="line">    src: <span class="string">'**'</span>,</span><br><span class="line">    dest: <span class="string">'dest/'</span>,</span><br><span class="line">    flatten: <span class="literal">true</span>,</span><br><span class="line">    filter: <span class="string">'isFile'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="grunt-contrib-watch">grunt-contrib-watch</h3><p><a href="https://github.com/gruntjs/grunt-contrib-watch" target="_blank" rel="external">watch模块</a>用来在后台运行，监听指定事件，然后自动运行指定的任务。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">watch: &#123;</span><br><span class="line">   scripts: &#123;</span><br><span class="line">    files: <span class="string">'**/*.js'</span>,</span><br><span class="line">    tasks: <span class="string">'jshint'</span>,</span><br><span class="line">	options: &#123;</span><br><span class="line">      livereload: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">   &#125;,</span><br><span class="line">   css: &#123;</span><br><span class="line">    files: <span class="string">'**/*.sass'</span>,</span><br><span class="line">    tasks: [<span class="string">'sass'</span>],</span><br><span class="line">    options: &#123;</span><br><span class="line">      livereload: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">   &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>设置好上面的代码，打开另一个进程，运行grunt watch。此后，任何的js代码变动，文件保存后就会自动运行jshint任务；任何sass文件变动，文件保存后就会自动运行sass任务。</p>
<p>需要注意的是，这两个任务的options参数之中，都设置了livereload，表示任务运行结束后，自动在浏览器中重载（reload）。这需要在浏览器中安装<a href="http://livereload.com/" target="_blank" rel="external">livereload插件</a>。安装后，livereload的默认端口为localhost:35729，但是也可以用livereload: 1337的形式重设端口（localhost:1337）。</p>
<h3 id="其他模块">其他模块</h3><p>下面是另外一些有用的模块。</p>
<p><strong>（1）grunt-contrib-clean</strong></p>
<p>该模块用于删除文件或目录。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">clean: &#123;</span><br><span class="line">  build: &#123;</span><br><span class="line">    src: [<span class="string">"path/to/dir/one"</span>, <span class="string">"path/to/dir/two"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>（2）grunt-autoprefixer</strong></p>
<p>该模块用于为CSS语句加上浏览器前缀。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">autoprefixer: &#123;</span><br><span class="line">  build: &#123;</span><br><span class="line">    expand: <span class="literal">true</span>,</span><br><span class="line">    cwd: <span class="string">'build'</span>,</span><br><span class="line">    src: [ <span class="string">'**/*.css'</span> ],</span><br><span class="line">    dest: <span class="string">'build'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><strong>（3）grunt-contrib-connect</strong></p>
<p>该模块用于在本机运行一个Web Server。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">connect: &#123;</span><br><span class="line">  server: &#123;</span><br><span class="line">    options: &#123;</span><br><span class="line">      port: <span class="number">4000</span>,</span><br><span class="line">      base: <span class="string">'build'</span>,</span><br><span class="line">      hostname: <span class="string">'*'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>connect模块会随着grunt运行结束而结束，为了使它一直处于运行状态，可以把它放在watch模块之前运行。因为watch模块需要手动中止，所以connect模块也就会一直运行。</p>
<p><strong>（4）grunt-htmlhint</strong></p>
<p>该模块用于检查HTML语法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">htmlhint: &#123;</span><br><span class="line">    build: &#123;</span><br><span class="line">        options: &#123;</span><br><span class="line">            <span class="string">'tag-pair'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'tagname-lowercase'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'attr-lowercase'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'attr-value-double-quotes'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'spec-char-escape'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'id-unique'</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">'head-script-disabled'</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        src: [<span class="string">'index.html'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码用于检查index.html文件：HTML标记是否配对、标记名和属性名是否小写、属性值是否包括在双引号之中、特殊字符是否转义、HTML元素的id属性是否为唯一值、head部分是否没有script标记。</p>
<p><strong>（5）grunt-contrib-sass模块</strong></p>
<p>该模块用于将SASS文件转为CSS文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sass: &#123;</span><br><span class="line">    build: &#123;</span><br><span class="line">		options: &#123;</span><br><span class="line">            style: <span class="string">'compressed'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        files: &#123;</span><br><span class="line">            <span class="string">'build/css/master.css'</span>: <span class="string">'assets/sass/master.scss'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码指定输出文件为build/css/master.css，输入文件为assets/sass/master.scss。</p>
<p><strong>（6）grunt-markdown</strong></p>
<p>该模块用于将markdown文档转为HTML文档。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">markdown: &#123;</span><br><span class="line">    all: &#123;</span><br><span class="line">      files: [</span><br><span class="line">        &#123;</span><br><span class="line">          expand: <span class="literal">true</span>,</span><br><span class="line">          src: <span class="string">'*.md'</span>,</span><br><span class="line">          dest: <span class="string">'docs/html/'</span>,</span><br><span class="line">          ext: <span class="string">'.html'</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      options: &#123;</span><br><span class="line">        template: <span class="string">'templates/index.html'</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>上面代码指定将md后缀名的文件，转为docs/html/目录下的html文件。template属性指定转换时采用的模板，模板样式如下。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"main"</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">%=content%</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="参考链接">参考链接</h2><ul>
<li>Frederic Hemberger, <a href="http://frederic-hemberger.de/artikel/grunt-buildtool-for-frontend-projects/" target="_blank" rel="external">A build tool for front-end projects</a></li>
<li>Mária Jurčovičová, <a href="http://flippinawesome.org/2013/07/01/building-a-javascript-library-with-grunt-js/" target="_blank" rel="external">Building a JavaScript Library with Grunt.js</a></li>
<li>Ben Briggs，<a href="http://sixrevisions.com/javascript/grunt-tutorial-01/" target="_blank" rel="external">Speed Up Your Web Development Workflow with Grunt</a></li>
<li><a href="http://blog.grayghostvisuals.com/grunt/image-optimization/" target="_blank" rel="external">Optimizing Images With Grunt</a></li>
<li>Swapnil Mishra, <a href="http://howtonode.org/c4e0f8565942d5e6df45fb78b12d19435543c236/simplifying-chores-with-grunt" target="_blank" rel="external">Simplifying Chores with Grunt</a></li>
<li>AJ ONeal, <a href="http://blog.coolaj86.com/articles/moving-to-grunt.html" target="_blank" rel="external">Moving to GruntJS</a></li>
<li>Grunt Documentation, <a href="http://gruntjs.com/configuring-tasks" target="_blank" rel="external">Configuring tasks</a></li>
<li>Landon Schropp, <a href="http://www.sitepoint.com/writing-awesome-build-script-grunt/" target="_blank" rel="external">Writing an Awesome Build Script with Grunt</a></li>
<li>Mike Cunsolo, <a href="http://coding.smashingmagazine.com/2013/10/29/get-up-running-grunt/" target="_blank" rel="external">Get Up And Running With Grunt</a></li>
<li>Matt Bailey, <a href="http://www.gpmd.co.uk/blog/a-beginners-guide-to-using-grunt-with-magento/" target="_blank" rel="external">A Beginner’s Guide to Using Grunt With Magento</a></li>
<li>Paul Bakaus, <a href="http://www.html5rocks.com/en/tutorials/tooling/supercharging-your-gruntfile/" target="_blank" rel="external">Supercharging your Gruntfile</a></li>
</ul>

</article>
<div id="post__share">
    <!-- 打赏入口 -->
    <a id="icon-heart" class="fontello" href="#"></a>
</div>

    <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more">分享到：</a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网">豆瓣网</a><a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记">有道云笔记</a><a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记">印象笔记</a></div>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","qzone","tsina","bdysc","weixin","renren","tqq","bdxc","kaixin001","tqf","tieba","douban","bdhome","sqq","thx","ibaidu","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","mail","isohu","wealink","ty","fbook","twi","linkedin","h163","evernotecn","print"],"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16},"image":{"viewList":["qzone","tsina","tqq","weixin","douban","youdao","evernotecn"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>


<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'micleewj'; // required: replace example with your forum shortname 这个地方需要改成你配置的网站名

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';

(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a

        <hr>
        <p id="copyright"> © 2015 MicLee&nbsp;&nbsp;|&nbsp;&nbsp;Powered by <a href="http://hexo.io" target="_blank">Hexo</a></p>
      </div>
      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">目录</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div>
    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>
<script src="/js/js-lib.js" type="text/javascript"></script>
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?a01595b492af7e4a793230e3d49ae638";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
  </body>
</html>
